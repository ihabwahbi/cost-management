(()=>{var e={};e.id=977,e.ids=[977],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},4656:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o}),a(31058),a(94489),a(12696);var r=a(19737),s=a(29722),n=a(77935),i=a.n(n),l=a(2385),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let o=["",{children:["projects",{children:["[id]",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31058)),"/home/iwahbi/dev/cost-management-v0/apps/web/app/projects/[id]/dashboard/page.tsx"]}]},{}]},{}]},{loading:[()=>Promise.resolve().then(a.bind(a,25616)),"/home/iwahbi/dev/cost-management-v0/apps/web/app/projects/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,94489)),"/home/iwahbi/dev/cost-management-v0/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,12696,23)),"next/dist/client/components/not-found-error"]}],d=["/home/iwahbi/dev/cost-management-v0/apps/web/app/projects/[id]/dashboard/page.tsx"],u="/projects/[id]/dashboard/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/projects/[id]/dashboard/page",pathname:"/projects/[id]/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84300:(e,t,a)=>{Promise.resolve().then(a.bind(a,74157))},20004:()=>{},74157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ta});var r=a(30817),s=a(19196),n=a.n(s),i=a(18369),l=a(54634),c=a(49755),o=a(67671),d=a(32987),u=a(50367);let m=(0,u.Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var h=a(6900),x=a(54744),p=a(61601);function g({budget:e,committed:t,plImpact:a,thisMonthPL:n,thisMonthChange:i,nextPLHits:u=[],plGap:g,monthlyBreakdown:f=[],loading:b=!1,onViewGapAnalysis:j}){let[v,y]=(0,s.useState)(!0),N=e>0?t/e*100:0,w=e>0?a/e*100:0,_=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:e>1e6?"compact":"standard"}).format(e);return b?(0,r.jsxs)(l.Zb,{className:"w-full",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"flex items-center justify-between",children:r.jsx("span",{className:"flex items-center gap-2",children:"P&L COMMAND CENTER"})})}),r.jsx(l.aY,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):(0,r.jsxs)(l.Zb,{className:"w-full border-2 border-blue-100 shadow-xl",children:[r.jsx(l.Ol,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,r.jsxs)(l.ll,{className:"flex items-center justify-between text-xl",children:[(0,r.jsxs)("span",{className:"flex items-center gap-3",children:[r.jsx(d.Z,{className:"h-6 w-6 text-blue-600"}),"P&L COMMAND CENTER"]}),(0,r.jsxs)(o.C,{variant:"outline",className:(0,p.cn)("flex items-center gap-1",v?"border-green-500 text-green-600":"border-gray-400"),children:[r.jsx(m,{className:"h-3 w-3"}),"Live"]})]})}),(0,r.jsxs)(l.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-4",children:"FINANCIAL REALITY CHECK"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"APPROVED BUDGET"}),r.jsx("span",{className:"text-lg font-bold",children:_(e)})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-blue-500 rounded-full",style:{width:"100%"}})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"TOTAL PO VALUE"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg font-bold",children:_(t)}),(0,r.jsxs)(o.C,{variant:"secondary",children:[N.toFixed(1),"%"]})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-400 to-indigo-500 rounded-full transition-all duration-700 ease-out",style:{width:`${Math.min(N,100)}%`}})}),g>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-amber-600",children:[r.jsx(c.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Open PO (Not Yet Invoiced): ",_(g)]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ACTUAL COST (Invoiced)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg font-bold text-green-600",children:_(a)}),(0,r.jsxs)(o.C,{variant:"outline",className:"border-green-500 text-green-600",children:[w.toFixed(1),"%"]})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-green-500 rounded-full transition-all duration-700 ease-out",style:{width:`${Math.min(w,100)}%`}})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-green-600",children:[r.jsx(h.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Actual costs in books"})]})]})]}),f&&f.length>0&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(x.Z,{className:"h-4 w-4 text-blue-600"}),"Monthly Cost Breakdown - When Costs Hit"]}),r.jsx("div",{className:"grid grid-cols-6 gap-2",children:f.slice(0,6).map((e,t)=>{let a=e.actual>0,s=e.projected>0;return e.actual,e.projected,(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:e.month}),(0,r.jsxs)("div",{className:"space-y-1",children:[a&&r.jsx("div",{className:"bg-green-500 rounded px-1 py-0.5",children:r.jsx("div",{className:"text-xs text-white font-medium",children:_(e.actual)})}),s&&r.jsx("div",{className:"bg-amber-400 rounded px-1 py-0.5 opacity-75",children:(0,r.jsxs)("div",{className:"text-xs text-white font-medium",children:["+",_(e.projected)]})}),!a&&!s&&r.jsx("div",{className:"text-xs text-gray-400",children:"-"})]})]},t)})}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),r.jsx("span",{className:"text-gray-600",children:"Actual (Invoiced)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 bg-amber-400 rounded opacity-75"}),r.jsx("span",{className:"text-gray-600",children:"Expected (Promise Dates)"})]})]})]}),g>0&&r.jsx("div",{className:"mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(c.Z,{className:"h-5 w-5 text-amber-600"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-amber-900",children:"P&L Gap Analysis"}),(0,r.jsxs)("div",{className:"text-sm text-amber-700",children:[(g/t*100).toFixed(1),"% of committed spend hasn't hit P&L"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-amber-900",children:_(g)}),r.jsx("div",{className:"text-xs text-amber-600",children:"Future P&L Impact"})]})]})})]})]})}var f=a(207),b=a(25478);let j=(0,u.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=a(58334),y=a(11534);let N=(0,u.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var w=a(42070);function _({categories:e,onDrillDown:t,onCustomize:a,loading:s=!1}){let n=(e,t=!1)=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:t?"compact":"standard"}).format(e),i=e=>`${e.toFixed(0)}%`;if(s)return(0,r.jsxs)(l.Zb,{className:"w-full",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"FINANCIAL CONTROL MATRIX"})}),r.jsx(l.aY,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]});let c=(()=>{let t=[],a=e.reduce((e,t)=>t.gapToPL>e.gapToPL?t:e,e[0]);a&&a.gapToPL>0&&t.push({type:"warning",text:`${a.name} has largest P&L gap (${n(a.gapToPL,!0)} uncommitted)`});let r=e.reduce((e,t)=>(t.committed>0?t.plImpact/t.committed*100:0)>(e.committed>0?e.plImpact/e.committed*100:0)?t:e,e[0]);if(r&&r.committed>0){let e=r.plImpact/r.committed*100;t.push({type:"success",text:`${r.name} most efficient (${e.toFixed(0)}% of commitments in P&L)`})}let s=e.reduce((e,t)=>t.gapToPL<e.gapToPL?t:e,e[0]);return s&&t.push({type:"info",text:`${s.name} has smallest future P&L risk (${n(s.gapToPL,!0)})`}),t})();return(0,r.jsxs)(l.Zb,{className:"w-full",children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[r.jsx(l.ll,{className:"text-lg font-semibold",children:"FINANCIAL CONTROL MATRIX"}),a&&(0,r.jsxs)(f.z,{variant:"ghost",size:"sm",onClick:a,className:"flex items-center gap-1",children:[r.jsx(j,{className:"h-4 w-4"}),"Customize"]})]}),(0,r.jsxs)(l.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4 pb-3 border-b text-sm font-medium text-gray-600",children:[r.jsx("div",{children:"Category"}),r.jsx("div",{className:"text-right",children:"Budget"}),r.jsx("div",{className:"text-right",children:"Total PO Value"}),r.jsx("div",{className:"text-right",children:"Actual Cost"}),r.jsx("div",{className:"text-right",children:"Open PO"})]}),r.jsx("div",{className:"space-y-4",children:e.map(e=>{let a=e.budget>0?e.committed/e.budget*100:0,s=e.budget>0?e.plImpact/e.budget*100:0,l=e.budget>0?e.gapToPL/e.budget*100:0;return(0,r.jsxs)("div",{className:"group hover:bg-gray-50 rounded-lg p-3 transition-colors cursor-pointer",onClick:()=>t?.(e.name),children:[(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4 items-center mb-3",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.name,r.jsx(v.Z,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 transition-colors"})]}),r.jsx("div",{className:"text-right font-semibold",children:n(e.budget)}),r.jsx("div",{className:"text-right font-semibold",children:n(e.committed)}),r.jsx("div",{className:"text-right font-semibold text-green-600",children:n(e.plImpact)}),r.jsx("div",{className:"text-right font-semibold text-amber-600",children:n(e.gapToPL)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4 items-center",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"100%"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(b.E,{value:100,className:"h-2"}),r.jsx("span",{className:"absolute -top-5 right-0 text-xs text-gray-500",children:"100%"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(b.E,{value:Math.min(a,100),className:(0,p.cn)("h-2",a>100&&"[&>div]:bg-red-500")}),r.jsx("span",{className:"absolute -top-5 right-0 text-xs text-gray-500",children:i(a)})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(b.E,{value:Math.min(s,100),className:"h-2 [&>div]:bg-green-500"}),r.jsx("span",{className:"absolute -top-5 right-0 text-xs text-gray-500",children:i(s)})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(b.E,{value:Math.min(l,100),className:"h-2 [&>div]:bg-amber-500"}),r.jsx("span",{className:"absolute -top-5 right-0 text-xs text-gray-500",children:i(l)})]})]})]},e.name)})}),c.length>0&&(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 font-semibold text-blue-900 mb-2",children:[r.jsx(y.Z,{className:"h-4 w-4"}),"Key Insights"]}),c.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:["warning"===e.type&&r.jsx(N,{className:"h-4 w-4 text-amber-600 mt-0.5"}),"success"===e.type&&r.jsx(w.Z,{className:"h-4 w-4 text-green-600 mt-0.5"}),"info"===e.type&&r.jsx(y.Z,{className:"h-4 w-4 text-blue-600 mt-0.5"}),r.jsx("span",{className:"text-gray-700",children:e.text})]},t)),t&&r.jsx(f.z,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>t("all"),children:"Drill Into Categories"})]})]})]})}var O=a(56810),k=a(47939),A=a(28969),E=a(30707),P=a(62796),C=a(65916),S=a(46648),D=a(7677),M=a(54126),L=a(4857),T=a(18119);function F({data:e,events:t=[],currentMonth:a=new Date().getMonth(),view:s="monthly",onViewChange:n,onRefresh:i,loading:d=!1}){let u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:e>1e6?"compact":"standard"}).format(e),m=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),h=Math.max(...e.map(e=>Math.max(e.actualPL+e.projectedPL,e.budget,e.cumulative)));return d?(0,r.jsxs)(l.Zb,{className:"w-full",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"P&L IMPACT TIMELINE"})}),r.jsx(l.aY,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):(0,r.jsxs)(l.Zb,{className:"w-full",children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[r.jsx(x.Z,{className:"h-5 w-5 text-blue-600"}),"ACTUAL COST TIMELINE (When Costs Hit)"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex items-center bg-gray-100 rounded-md p-1",children:["monthly","quarterly","yearly"].map(e=>r.jsx(f.z,{variant:s===e?"default":"ghost",size:"sm",className:(0,p.cn)("px-3 py-1 text-xs",s===e?"bg-blue-600 text-white":"text-gray-600"),onClick:()=>n?.(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),i&&r.jsx(f.z,{variant:"ghost",size:"sm",onClick:i,className:"flex items-center gap-1",children:r.jsx(T.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)(l.aY,{children:[r.jsx("div",{className:"h-[400px] mb-6",children:r.jsx(O.h,{width:"100%",height:"100%",children:(0,r.jsxs)(k.c,{data:e,margin:{top:20,right:30,left:20,bottom:20},children:[r.jsx("defs",{children:r.jsx("pattern",{id:"stripes",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:r.jsx("path",{d:"M 0 4 L 4 0",stroke:"#fbbf24",strokeWidth:"1",opacity:"0.5"})})}),r.jsx(A.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(E.K,{dataKey:"month",tick:{fontSize:12},stroke:"#6b7280"}),r.jsx(P.B,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:e=>`$${e/1e3}K`,domain:[0,1.1*h]}),r.jsx(C.u,{content:r.jsx(({active:e,payload:t,label:a})=>{if(e&&t&&t.length){let e=t[0].payload;return(0,r.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:a}),e.actualPL>0&&(0,r.jsxs)("p",{className:"text-sm text-green-600",children:["Actual P&L: ",u(e.actualPL)]}),e.projectedPL>0&&(0,r.jsxs)("p",{className:"text-sm text-amber-600",children:["Projected P&L: ",u(e.projectedPL)]}),(0,r.jsxs)("p",{className:"text-sm text-blue-600",children:["Budget: ",u(e.budget)]}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-gray-900 mt-1 pt-1 border-t",children:["Cumulative: ",u(e.cumulative)]})]})}return null},{})}),r.jsx(S.D,{wrapperStyle:{paddingTop:"20px"},iconType:"rect"}),r.jsx(D.x,{type:"monotone",dataKey:"budget",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"5 5",name:"Budget Baseline",dot:!1}),r.jsx(M.$,{dataKey:"actualPL",fill:"#10b981",name:"Actual P&L Impact",radius:[4,4,0,0]}),r.jsx(M.$,{dataKey:"projectedPL",fill:"url(#stripes)",name:"Projected P&L Impact",radius:[4,4,0,0]}),r.jsx(D.x,{type:"monotone",dataKey:"cumulative",stroke:"#6366f1",strokeWidth:3,name:"Cumulative P&L",dot:{fill:"#6366f1",r:4}}),r.jsx(L.d,{x:e[a]?.month,stroke:"#ef4444",strokeWidth:2,label:{value:"TODAY",position:"top"}})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-6 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Actual Cost (Invoiced)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 bg-amber-400 rounded opacity-50",style:{background:"repeating-linear-gradient(45deg, #fbbf24, #fbbf24 2px, transparent 2px, transparent 4px)"}}),r.jsx("span",{className:"text-sm text-gray-600",children:"Future Cost (Based on Promise Dates)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-1 bg-blue-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Budget"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Cumulative Cost"})]})]}),t.length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(y.Z,{className:"h-4 w-4"}),"Key Cost Events"]}),r.jsx("div",{className:"space-y-2",children:t.slice(0,5).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["overdue"===e.type&&r.jsx(c.Z,{className:"h-4 w-4 text-red-500"}),"invoice"===e.type&&r.jsx(o.C,{variant:"outline",className:"text-xs border-green-500 text-green-600",children:"INVOICED"}),"expected"===e.type&&r.jsx(o.C,{variant:"outline",className:"text-xs border-amber-500 text-amber-600",children:"EXPECTED"}),(0,r.jsxs)("span",{className:"text-gray-700",children:[m(e.date),": ",e.description]})]}),r.jsx("span",{className:"font-semibold text-gray-900",children:u(e.amount)})]},t))})]})]})]})}var I=a(36323),$=a(78780);function Z({promises:e,currentDate:t=new Date,onDateClick:a,loading:n=!1}){let[i,o]=(0,s.useState)(t.getMonth()),[u,m]=(0,s.useState)(t.getFullYear()),h=e.reduce((e,t)=>{let a=t.date.split("T")[0];return e[a]||(e[a]=[]),e[a].push(t),e},{}),g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:e>1e5?"compact":"standard"}).format(e),b=e=>{"prev"===e?0===i?(o(11),m(u-1)):o(i-1):11===i?(o(0),m(u+1)):o(i+1)},j=((e,t)=>{let a=new Date(t,e,1),r=new Date(t,e+1,0).getDate(),s=a.getDay(),n=[];for(let e=0;e<s;e++)n.push(null);for(let e=1;e<=r;e++)n.push(e);return n})(i,u),y=Object.entries(h).reduce((e,[t,a])=>{let r=new Date(t);return r.getMonth()===i&&r.getFullYear()===u?e+a.reduce((e,t)=>e+t.amount,0):e},0),N=y>0?(y/25e5*100).toFixed(1):"0";return n?(0,r.jsxs)(l.Zb,{className:"w-full",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"P&L FORECAST CALENDAR"})}),r.jsx(l.aY,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):(0,r.jsxs)(l.Zb,{className:"w-full",children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[r.jsx(x.Z,{className:"h-5 w-5 text-blue-600"}),"P&L FORECAST CALENDAR"]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][i]," ",u]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>b("prev"),children:r.jsx(I.Z,{className:"h-4 w-4"})}),r.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>b("next"),children:r.jsx(v.Z,{className:"h-4 w-4"})})]})]})]}),(0,r.jsxs)(l.aY,{children:[r.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>r.jsx("div",{className:"text-center text-xs font-semibold text-gray-600 py-2",children:e},e))}),r.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map((e,s)=>{if(null===e)return r.jsx("div",{className:"h-20"},`empty-${s}`);let n=`${u}-${String(i+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,l=h[n]||[],o=l.reduce((e,t)=>e+t.amount,0),m=l.some(e=>e.isOverdue),x=l.some(e=>e.amount>1e5),f=e===t.getDate()&&i===t.getMonth()&&u===t.getFullYear();return(0,r.jsxs)("div",{className:(0,p.cn)("h-20 p-2 border rounded-lg cursor-pointer transition-all hover:shadow-md",f&&"border-blue-500 bg-blue-50",l.length>0&&"bg-amber-50 border-amber-200",m&&"bg-red-50 border-red-300",!l.length&&!f&&"border-gray-200"),onClick:()=>l.length>0&&a?.(n,l),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[r.jsx("span",{className:(0,p.cn)("text-sm font-medium",f&&"text-blue-600",m&&"text-red-600"),children:e}),m&&r.jsx(c.Z,{className:"h-3 w-3 text-red-500"}),!m&&x&&r.jsx(d.Z,{className:"h-3 w-3 text-amber-500"})]}),l.length>0&&(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-900",children:g(o)}),l.length>1&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[l.length," items"]})]})]},`day-${e}`)})}),r.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Month Total"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g(y)})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Budget Impact"}),(0,r.jsxs)("div",{className:"text-xl font-bold text-blue-600",children:[N,"%"]})]})]})}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(c.Z,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{className:"text-gray-600",children:"Overdue"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(d.Z,{className:"h-3 w-3 text-amber-500"}),r.jsx("span",{className:"text-gray-600",children:"High Value"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx($.Z,{className:"h-3 w-3 text-blue-500"}),r.jsx("span",{className:"text-gray-600",children:"Major Supplier"})]})]}),r.jsx("div",{className:"mt-2 text-center text-xs text-gray-500",children:"Click any date for line item details"})]})]})}var z=a(97037),R=a.n(z),B=a(45141),q=a.n(B),K=a(26456),U=a.n(K),Y=a(6116),V=a.n(Y),W=a(28804),G=a(32101),H=a(70003),J=a(37933),X=a(28424),Q=a(58106),ee=a(74051),et=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],ea=a(63636),er=a(16141),es=a(35387),en=a(81042),ei=["width","height","className","style","children","type"];function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(){return(ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function eo(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eg(r.key),r)}}function ed(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ed=function(){return!!e})()}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t){return(em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eh(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ex(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(a),!0).forEach(function(t){ep(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eh(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ep(e,t,a){return(t=eg(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function eg(e){var t=function(e,t){if("object"!=el(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=el(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==el(t)?t:t+""}var ef="value",eb=function e(t){var a,r=t.depth,s=t.node,n=t.index,i=t.valueKey,l=s.children,c=r+1,o=l&&l.length?l.map(function(t,a){return e({depth:c,node:t,index:a,valueKey:i})}):null;return a=l&&l.length?o.reduce(function(e,t){return e+t[ef]},0):R()(s[i])||s[i]<=0?0:s[i],ex(ex({},s),{},ep(ep(ep({children:o},ef,a),"depth",r),"index",n))},ej=function(e,t){var a=t<0?0:t;return e.map(function(e){var t=e[ef]*a;return ex(ex({},e),{},{area:R()(t)||t<=0?0:t})})},ev=function(e,t,a){var r=t*t,s=e.area*e.area,n=e.reduce(function(e,t){return{min:Math.min(e.min,t.area),max:Math.max(e.max,t.area)}},{min:1/0,max:0}),i=n.min,l=n.max;return s?Math.max(r*l*a/s,s/(r*i*a)):1/0},ey=function(e,t,a,r){var s,n=t?Math.round(e.area/t):0;(r||n>a.height)&&(n=a.height);for(var i=a.x,l=0,c=e.length;l<c;l++)(s=e[l]).x=i,s.y=a.y,s.height=n,s.width=Math.min(n?Math.round(s.area/n):0,a.x+a.width-i),i+=s.width;return s.width+=a.x+a.width-i,ex(ex({},a),{},{y:a.y+n,height:a.height-n})},eN=function(e,t,a,r){var s,n=t?Math.round(e.area/t):0;(r||n>a.width)&&(n=a.width);for(var i=a.y,l=0,c=e.length;l<c;l++)(s=e[l]).x=a.x,s.y=i,s.width=n,s.height=Math.min(n?Math.round(s.area/n):0,a.y+a.height-i),i+=s.height;return s&&(s.height+=a.y+a.height-i),ex(ex({},a),{},{x:a.x+n,width:a.width-n})},ew=function(e,t,a,r){return t===a.width?ey(e,t,a,r):eN(e,t,a,r)},e_=function e(t,a){var r=t.children;if(r&&r.length){var s,n,i={x:t.x,y:t.y,width:t.width,height:t.height},l=[],c=1/0,o=Math.min(i.width,i.height),d=ej(r,i.width*i.height/t[ef]),u=d.slice();for(l.area=0;u.length>0;)l.push(s=u[0]),l.area+=s.area,(n=ev(l,o,a))<=c?(u.shift(),c=n):(l.area-=l.pop().area,o=Math.min((i=ew(l,o,i,!1)).width,i.height),l.length=l.area=0,c=1/0);return l.length&&(i=ew(l,o,i,!0),l.length=l.area=0),ex(ex({},t),{},{children:d.map(function(t){return e(t,a)})})}return t},eO={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},ek=function(e){var t,a;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r);for(var e,t,a,s=arguments.length,n=Array(s),i=0;i<s;i++)n[i]=arguments[i];return t=r,a=[].concat(n),t=eu(t),ep(e=function(e,t){if(t&&("object"===el(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,ed()?Reflect.construct(t,a||[],eu(this).constructor):t.apply(this,a)),"state",ex({},eO)),ep(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),q()(t)&&t()}),ep(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),q()(t)&&t()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&em(e,t)}(r,e),t=[{key:"handleMouseEnter",value:function(e,t){t.persist();var a=this.props,r=a.onMouseEnter,s=a.children;(0,en.sP)(s,C.u)?this.setState({isTooltipActive:!0,activeNode:e},function(){r&&r(e,t)}):r&&r(e,t)}},{key:"handleMouseLeave",value:function(e,t){t.persist();var a=this.props,r=a.onMouseLeave,s=a.children;(0,en.sP)(s,C.u)?this.setState({isTooltipActive:!1,activeNode:null},function(){r&&r(e,t)}):r&&r(e,t)}},{key:"handleClick",value:function(e){var t=this.props,a=t.onClick;if("nest"===t.type&&e.children){var r=this.props,s=r.width,n=r.height,i=r.dataKey,l=r.aspectRatio,c=eb({depth:0,node:ex(ex({},e),{},{x:0,y:0,width:s,height:n}),index:0,valueKey:i}),o=e_(c,l),d=this.state.nestIndex;d.push(e),this.setState({formatRoot:o,currentRoot:c,nestIndex:d})}a&&a(e)}},{key:"handleNestIndex",value:function(e,t){var a=this.state.nestIndex,r=this.props,s=r.width,n=r.height,i=r.dataKey,l=r.aspectRatio,c=e_(eb({depth:0,node:ex(ex({},e),{},{x:0,y:0,width:s,height:n}),index:0,valueKey:i}),l);a=a.slice(0,t+1),this.setState({formatRoot:c,currentRoot:e,nestIndex:a})}},{key:"renderItem",value:function(e,t,a){var r=this,s=this.props,i=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,o=s.animationEasing,d=s.isUpdateAnimationActive,u=s.type,m=s.animationId,h=s.colorPanel,x=this.state.isAnimationFinished,p=t.width,g=t.height,f=t.x,b=t.y,j=t.depth,v=parseInt("".concat((2*Math.random()-1)*p),10),y={};return((a||"nest"===u)&&(y={onMouseEnter:this.handleMouseEnter.bind(this,t),onMouseLeave:this.handleMouseLeave.bind(this,t),onClick:this.handleClick.bind(this,t)}),i)?n().createElement(G.ZP,{begin:l,duration:c,isActive:i,easing:o,key:"treemap-".concat(m),from:{x:f,y:b,width:p,height:g},to:{x:f,y:b,width:p,height:g},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(a){var s=a.x,m=a.y,p=a.width,g=a.height;return n().createElement(G.ZP,{from:"translate(".concat(v,"px, ").concat(v,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:l,easing:o,isActive:i,duration:c},n().createElement(H.m,y,j>2&&!x?null:r.constructor.renderContentItem(e,ex(ex({},t),{},{isAnimationActive:i,isUpdateAnimationActive:!d,width:p,height:g,x:s,y:m}),u,h)))}):n().createElement(H.m,y,this.constructor.renderContentItem(e,ex(ex({},t),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:p,height:g,x:f,y:b}),u,h))}},{key:"renderNode",value:function(e,t){var a=this,r=this.props,s=r.content,i=r.type,l=ex(ex(ex({},(0,en.L6)(this.props,!1)),t),{},{root:e}),c=!t.children||!t.children.length;return!(this.state.currentRoot.children||[]).filter(function(e){return e.depth===t.depth&&e.name===t.name}).length&&e.depth&&"nest"===i?null:n().createElement(H.m,{key:"recharts-treemap-node-".concat(l.x,"-").concat(l.y,"-").concat(l.name),className:"recharts-treemap-depth-".concat(t.depth)},this.renderItem(s,l,c),t.children&&t.children.length?t.children.map(function(e){return a.renderNode(t,e)}):null)}},{key:"renderAllNodes",value:function(){var e=this.state.formatRoot;return e?this.renderNode(e,e):null}},{key:"renderTooltip",value:function(){var e=this.props,t=e.children,a=e.nameKey,r=(0,en.sP)(t,C.u);if(!r)return null;var s=this.props,i=s.width,l=s.height,c=this.state,o=c.isTooltipActive,d=c.activeNode,u=d?{x:d.x+d.width/2,y:d.y+d.height/2}:null,m=o&&d?[{payload:d,name:(0,ee.F$)(d,a,""),value:(0,ee.F$)(d,ef)}]:[];return n().cloneElement(r,{viewBox:{x:0,y:0,width:i,height:l},active:o,coordinate:u,label:"",payload:m})}},{key:"renderNestIndex",value:function(){var e=this,t=this.props,a=t.nameKey,r=t.nestIndexContent,s=this.state.nestIndex;return n().createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},s.map(function(t,s){var i=V()(t,a,"root"),l=null;return n().isValidElement(r)&&(l=n().cloneElement(r,t,s)),l=q()(r)?r(t,s):i,n().createElement("div",{onClick:e.handleNestIndex.bind(e,t,s),key:"nest-index-".concat((0,ea.EL)()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},l)}))}},{key:"render",value:function(){if(!(0,en.TT)(this))return null;var e=this.props,t=e.width,a=e.height,r=e.className,s=e.style,i=e.children,l=e.type,c=function(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,ei),o=(0,en.L6)(c,!1);return n().createElement("div",{className:(0,W.Z)("recharts-wrapper",r),style:ex(ex({},s),{},{position:"relative",cursor:"default",width:t,height:a}),role:"region"},n().createElement(J.T,ec({},o,{width:t,height:"nest"===l?a-30:a}),this.renderAllNodes(),(0,en.hQ)(i)),this.renderTooltip(),"nest"===l&&this.renderNestIndex())}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){if(e.data!==t.prevData||e.type!==t.prevType||e.width!==t.prevWidth||e.height!==t.prevHeight||e.dataKey!==t.prevDataKey||e.aspectRatio!==t.prevAspectRatio){var a=eb({depth:0,node:{children:e.data,x:0,y:0,width:e.width,height:e.height},index:0,valueKey:e.dataKey}),r=e_(a,e.aspectRatio);return ex(ex({},t),{},{formatRoot:r,currentRoot:a,nestIndex:[a],prevAspectRatio:e.aspectRatio,prevData:e.data,prevWidth:e.width,prevHeight:e.height,prevDataKey:e.dataKey,prevType:e.type})}return null}},{key:"renderContentItem",value:function(e,t,a,r){if(n().isValidElement(e))return n().cloneElement(e,t);if(q()(e))return e(t);var s=t.x,i=t.y,l=t.width,c=t.height,o=t.index,d=null;l>10&&c>10&&t.children&&"nest"===a&&(d=n().createElement(X.m,{points:[{x:s+2,y:i+c/2},{x:s+6,y:i+c/2+3},{x:s+2,y:i+c/2+6}]}));var u=null,m=(0,er.xE)(t.name);l>20&&c>20&&m.width<l&&m.height<c&&(u=n().createElement("text",{x:s+8,y:i+c/2+7,fontSize:14},t.name));var h=r||et;return n().createElement("g",null,n().createElement(Q.A,ec({fill:t.depth<2?h[o%h.length]:"rgba(255,255,255,0)",stroke:"#fff"},U()(t,"children"),{role:"img"})),d,u)}}],t&&eo(r.prototype,t),a&&eo(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}(s.PureComponent);ep(ek,"displayName","Treemap"),ep(ek,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!es.x.isSsr,isUpdateAnimationActive:!es.x.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});var eA=a(18426);function eE({data:e,loading:t=!1,onDrillDown:a}){let[n,i]=(0,s.useState)(new Set),[c,o]=(0,s.useState)("tree"),d=Object.values(e.reduce((e,t)=>(e[t.category]||(e[t.category]={category:t.category,total:0,budget:0,subcategories:[]}),e[t.category].total+=t.value,e[t.category].budget+=t.budget,e[t.category].subcategories.push(t),e),{})),u=d.map(e=>({name:e.category,value:e.total,children:e.subcategories.map(t=>({name:t.subcategory,value:t.value,category:e.category}))})),m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:e>1e6?"compact":"standard"}).format(e),h=e=>{let t=new Set(n);t.has(e)?t.delete(e):t.add(e),i(t)},x=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];return t?(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"Spend by Subcategory"})}),r.jsx(l.aY,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[r.jsx($.Z,{className:"h-5 w-5 text-blue-600"}),"Spend by Subcategory"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(f.z,{variant:"tree"===c?"default":"outline",size:"sm",onClick:()=>o("tree"),children:"Treemap"}),r.jsx(f.z,{variant:"list"===c?"default":"outline",size:"sm",onClick:()=>o("list"),children:"List"})]})]}),(0,r.jsxs)(l.aY,{children:["tree"===c?r.jsx("div",{className:"h-[400px]",children:r.jsx(O.h,{width:"100%",height:"100%",children:r.jsx(ek,{data:u,dataKey:"value",aspectRatio:4/3,stroke:"#fff",content:r.jsx(e=>{let{x:t,y:s,width:n,height:i,name:l,value:c,category:o}=e;return(0,r.jsxs)("g",{children:[r.jsx("rect",{x:t,y:s,width:n,height:i,style:{fill:x[d.findIndex(e=>e.category===(o||l))%x.length],stroke:"#fff",strokeWidth:2,strokeOpacity:1,cursor:"pointer"},onClick:()=>a?.(o||l,l)}),n>60&&i>30&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("text",{x:t+n/2,y:s+i/2-10,textAnchor:"middle",fill:"#fff",fontSize:"12",fontWeight:"bold",children:l}),r.jsx("text",{x:t+n/2,y:s+i/2+10,textAnchor:"middle",fill:"#fff",fontSize:"10",children:m(c)})]})]})},{})})})}):r.jsx("div",{className:"space-y-2",children:d.map((e,t)=>{let s=n.has(e.category),i=e.budget>0?e.total/e.budget*100:0;return(0,r.jsxs)("div",{className:"border rounded-lg",children:[(0,r.jsxs)("div",{className:"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>h(e.category),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s?r.jsx(eA.Z,{className:"h-4 w-4 text-gray-500"}):r.jsx(v.Z,{className:"h-4 w-4 text-gray-500"}),r.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:x[t%x.length]}}),r.jsx("span",{className:"font-medium",children:e.category})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:[m(e.total)," / ",m(e.budget)]}),(0,r.jsxs)("span",{className:(0,p.cn)("font-medium",i>100?"text-red-600":i>80?"text-amber-600":"text-green-600"),children:[i.toFixed(1),"%"]})]})]}),s&&r.jsx("div",{className:"px-3 pb-3",children:r.jsx("div",{className:"ml-6 space-y-1 pt-2 border-t",children:e.subcategories.map(t=>{let s=t.budget>0?t.value/t.budget*100:0;return(0,r.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 hover:bg-gray-50 rounded cursor-pointer",onClick:r=>{r.stopPropagation(),a?.(e.category,t.subcategory)},children:[r.jsx("span",{className:"text-sm text-gray-700",children:t.subcategory}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx("span",{className:"text-gray-600",children:m(t.value)}),(0,r.jsxs)("span",{className:(0,p.cn)("font-medium text-xs",s>100?"text-red-600":s>80?"text-amber-600":"text-green-600"),children:[s.toFixed(0),"%"]})]})]},t.subcategory)})})})]},e.category)})}),r.jsx("div",{className:"mt-4 pt-4 border-t",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Total across all subcategories:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:m(d.reduce((e,t)=>e+t.total,0))})]})})]})]})}let eP={light:"",dark:".dark"},eC=s.createContext(null);function eS({id:e,className:t,children:a,config:n,...i}){let l=s.useId(),c=`chart-${e||l.replace(/:/g,"")}`;return r.jsx(eC.Provider,{value:{config:n},children:(0,r.jsxs)("div",{"data-slot":"chart","data-chart":c,className:(0,p.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",t),...i,children:[r.jsx(eD,{id:c,config:n}),r.jsx(O.h,{children:a})]})})}let eD=({id:e,config:t})=>{let a=Object.entries(t).filter(([,e])=>e.theme||e.color);return a.length?r.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(eP).map(([t,r])=>`
${r} [data-chart=${e}] {
${a.map(([e,a])=>{let r=a.theme?.[t]||a.color;return r?`  --color-${e}: ${r};`:null}).join("\n")}
}
`).join("\n")}}):null},eM=C.u;function eL({active:e,payload:t,className:a,indicator:n="dot",hideLabel:i=!1,hideIndicator:l=!1,label:c,labelFormatter:o,labelClassName:d,formatter:u,color:m,nameKey:h,labelKey:x}){let{config:g}=function(){let e=s.useContext(eC);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),f=s.useMemo(()=>{if(i||!t?.length)return null;let[e]=t,a=`${x||e?.dataKey||e?.name||"value"}`,s=eT(g,e,a),n=x||"string"!=typeof c?s?.label:g[c]?.label||c;return o?r.jsx("div",{className:(0,p.cn)("font-medium",d),children:o(n,t)}):n?r.jsx("div",{className:(0,p.cn)("font-medium",d),children:n}):null},[c,o,t,i,d,g,x]);if(!e||!t?.length)return null;let b=1===t.length&&"dot"!==n;return(0,r.jsxs)("div",{className:(0,p.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",a),children:[b?null:f,r.jsx("div",{className:"grid gap-1.5",children:t.map((e,t)=>{let a=`${h||e.name||e.dataKey||"value"}`,s=eT(g,e,a),i=m||e.payload.fill||e.color;return r.jsx("div",{className:(0,p.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===n&&"items-center"),children:u&&e?.value!==void 0&&e.name?u(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[s?.icon?r.jsx(s.icon,{}):!l&&r.jsx("div",{className:(0,p.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":b&&"dashed"===n}),style:{"--color-bg":i,"--color-border":i}}),(0,r.jsxs)("div",{className:(0,p.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[b?f:null,r.jsx("span",{className:"text-muted-foreground",children:s?.label||e.name})]}),e.value&&r.jsx("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function eT(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e?e[s]:e[a]}S.D;var eF=a(86805);let eI={budget:{label:"Budget",color:"#0014dc"},actual:{label:"Actual Spend",color:"#00d2dc"},forecast:{label:"Forecast",color:"#0099a3"}};function e$({data:e}){return r.jsx(eS,{config:eI,className:"min-h-[300px] w-full",children:(0,r.jsxs)(k.c,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(A.q,{strokeDasharray:"3 3",className:"stroke-muted"}),r.jsx(E.K,{dataKey:"month",className:"text-xs",tick:{fill:"currentColor",fontSize:12},tickLine:{stroke:"currentColor"}}),r.jsx(P.B,{className:"text-xs",tick:{fill:"currentColor",fontSize:12},tickLine:{stroke:"currentColor"},tickFormatter:e=>`$${(e/1e3).toFixed(0)}K`}),r.jsx(eM,{content:r.jsx(eL,{className:"w-[180px]",nameKey:"month",formatter:e=>`$${(Number(e)/1e3).toFixed(1)}K`})}),r.jsx(S.D,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),r.jsx(eF.u,{type:"monotone",dataKey:"budget",fill:"var(--color-budget)",fillOpacity:.2,stroke:"var(--color-budget)",strokeWidth:2}),r.jsx(D.x,{type:"monotone",dataKey:"actual",stroke:"var(--color-actual)",strokeWidth:2,dot:{r:3,fill:"var(--color-actual)"},activeDot:{r:5}}),r.jsx(M.$,{dataKey:"forecast",fill:"var(--color-forecast)",fillOpacity:.6})]})})}var eZ=a(89426),ez=a(56504),eR=a(65421);let eB=["#0014dc","#00d2dc","#0099a3","#6366f1","#8b5cf6","#ec4899","#f59e0b","#10b981"];function eq({data:e}){let t=e.reduce((e,t,a)=>(e[t.name]={label:t.name,color:eB[a%eB.length]},e),{}),a=Math.PI/180;return r.jsx(eS,{config:t,className:"min-h-[300px] w-full",children:(0,r.jsxs)(eZ.u,{children:[r.jsx(ez.b,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({cx:e,cy:t,midAngle:s,innerRadius:n,outerRadius:i,percent:l})=>{let c=n+(i-n)*.5,o=e+c*Math.cos(-s*a);return l<.05?null:r.jsx("text",{x:o,y:t+c*Math.sin(-s*a),fill:"white",textAnchor:o>e?"start":"end",dominantBaseline:"central",className:"text-xs font-medium",children:`${(100*l).toFixed(0)}%`})},outerRadius:100,fill:"#8884d8",dataKey:"value",children:e.map((e,t)=>r.jsx(eR.b,{fill:eB[t%eB.length]},`cell-${t}`))}),r.jsx(C.u,{content:r.jsx(({active:e,payload:t})=>{if(e&&t&&t.length){let e=t[0];return r.jsx("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium",children:[e.name,":"]}),(0,r.jsxs)("span",{className:"text-sm font-bold",children:["$",(e.value/1e3).toFixed(1),"K"]})]}),e.payload.budget&&(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Budget:"}),(0,r.jsxs)("span",{className:"text-xs",children:["$",(e.payload.budget/1e3).toFixed(1),"K"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Utilization:"}),r.jsx("span",{className:"text-xs",children:e.payload.budget>0?`${(e.value/e.payload.budget*100).toFixed(1)}%`:"N/A"})]})]})})}return null},{})}),r.jsx(S.D,{verticalAlign:"bottom",height:36,iconType:"square",formatter:e=>r.jsx("span",{className:"text-xs",children:e})})]})})}let eK=(0,u.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var eU=a(63376);function eY({data:e}){let[t,a]=(0,s.useState)(new Set),n=e=>{let r=new Set(t);r.has(e)?r.delete(e):r.add(e),a(r)},i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,notation:Math.abs(e)>999999?"compact":"standard"}).format(e),l=e=>e>100?"text-red-600 font-bold":e>90?"text-orange-600 font-semibold":e>75?"text-yellow-600":"text-gray-600",c=e=>e>100?"bg-red-500":e>90?"bg-orange-500":e>75?"bg-yellow-500":"bg-blue-500",d=e=>{switch(e){case"business_line":return"default";case"cost_line":return"secondary";default:return"outline"}},u=(e,a=0)=>{let s=t.has(e.id),m=e.children&&e.children.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eU.SC,{className:(0,p.cn)("hover:bg-muted/50 transition-colors",0===a&&"font-semibold",1===a&&"font-medium"),children:[r.jsx(eU.pj,{style:{paddingLeft:`${24*a+16}px`},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[m&&r.jsx(f.z,{variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:()=>n(e.id),children:s?r.jsx(eA.Z,{className:"h-4 w-4"}):r.jsx(v.Z,{className:"h-4 w-4"})}),!m&&a>0&&r.jsx("div",{className:"w-5"}),r.jsx("span",{className:(0,p.cn)(0===a&&"font-semibold"),children:e.name}),r.jsx(o.C,{variant:d(e.level),className:"text-xs ml-2",children:e.level.replace("_"," ")})]})}),r.jsx(eU.pj,{className:"text-right",children:i(e.budget)}),r.jsx(eU.pj,{className:"text-right",children:i(e.actual)}),r.jsx(eU.pj,{className:"text-right",children:(0,r.jsxs)("span",{className:(0,p.cn)(e.variance>=0?"text-green-600":"text-red-600",Math.abs(e.variance)>.2*e.budget&&"font-semibold"),children:[i(Math.abs(e.variance)),e.variance<0&&" over"]})}),r.jsx(eU.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:(0,p.cn)("h-full transition-all",c(e.utilization)),style:{width:`${Math.min(e.utilization,100)}%`}})}),(0,r.jsxs)("span",{className:(0,p.cn)("text-xs w-12 text-right",l(e.utilization)),children:[e.utilization.toFixed(0),"%"]})]})}),r.jsx(eU.pj,{children:"sub_category"===e.level&&(0,r.jsxs)(f.z,{variant:"outline",size:"sm",className:"h-7",children:[r.jsx(eK,{className:"h-3 w-3 mr-1"}),"Details"]})})]},e.id),s&&m&&e.children?.map(e=>u(e,a+1))]})};return e&&0!==e.length?r.jsx("div",{className:"rounded-md border",children:(0,r.jsxs)(eU.iA,{children:[r.jsx(eU.xD,{children:(0,r.jsxs)(eU.SC,{children:[r.jsx(eU.ss,{className:"w-[40%]",children:"Category"}),r.jsx(eU.ss,{className:"text-right",children:"Budget"}),r.jsx(eU.ss,{className:"text-right",children:"Actual"}),r.jsx(eU.ss,{className:"text-right",children:"Variance"}),r.jsx(eU.ss,{className:"w-[20%]",children:"Utilization"}),r.jsx(eU.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(eU.RM,{children:e.map(e=>u(e))})]})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No cost breakdown data available"})}var eV=a(35135);function eW(){return(0,r.jsxs)("div",{className:"container mx-auto p-6 max-w-[1600px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx(eV.O,{className:"h-9 w-64 mb-2"}),r.jsx(eV.O,{className:"h-5 w-32"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(eV.O,{className:"h-9 w-24"}),r.jsx(eV.O,{className:"h-9 w-24"}),r.jsx(eV.O,{className:"h-9 w-24"}),r.jsx(eV.O,{className:"h-9 w-32"})]})]}),r.jsx(l.Zb,{className:"p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(eV.O,{className:"h-10 w-full lg:col-span-2"}),r.jsx(eV.O,{className:"h-10 w-full"}),r.jsx(eV.O,{className:"h-10 w-full"}),r.jsx(eV.O,{className:"h-10 w-full"})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:Array.from({length:6}).map((e,t)=>(0,r.jsxs)(l.Zb,{className:"border-l-4 border-l-gray-300",children:[r.jsx(l.Ol,{className:"pb-2",children:r.jsx(eV.O,{className:"h-4 w-24"})}),(0,r.jsxs)(l.aY,{children:[r.jsx(eV.O,{className:"h-8 w-32"}),r.jsx(eV.O,{className:"h-3 w-16 mt-2"})]})]},t))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(eV.O,{className:"h-5 w-48"})}),r.jsx(l.aY,{children:r.jsx(eV.O,{className:"h-[300px] w-full"})})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(eV.O,{className:"h-5 w-40"})}),r.jsx(l.aY,{children:r.jsx(eV.O,{className:"h-[300px] w-full"})})]})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(eV.O,{className:"h-5 w-36"})}),r.jsx(l.aY,{children:r.jsx(eV.O,{className:"h-[300px] w-full"})})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(eV.O,{className:"h-5 w-48"})}),r.jsx(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 pb-2 border-b",children:[r.jsx(eV.O,{className:"h-4 w-32"}),r.jsx(eV.O,{className:"h-4 w-24 ml-auto"}),r.jsx(eV.O,{className:"h-4 w-24"}),r.jsx(eV.O,{className:"h-4 w-24"}),r.jsx(eV.O,{className:"h-4 w-32"}),r.jsx(eV.O,{className:"h-4 w-24"})]}),Array.from({length:5}).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-4 py-3",children:[r.jsx(eV.O,{className:"h-4 w-40"}),r.jsx(eV.O,{className:"h-4 w-20 ml-auto"}),r.jsx(eV.O,{className:"h-4 w-20"}),r.jsx(eV.O,{className:"h-4 w-20"}),r.jsx(eV.O,{className:"h-8 w-32"}),r.jsx(eV.O,{className:"h-8 w-20"})]},t))]})})]})]})]})}function eG(e){let t=e.filter(e=>"string"==typeof e&&e.trim().length>0);if(0===t.length)return null;let a=t.map(e=>{let t=e.replace(/"/g,'""');return`"${t}"`});return`(${a.join(",")})`}let eH=e=>{let t=Number(e);return Number.isFinite(t)?t:0},eJ=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function eX(e){if(!e||!e.id)throw Error("Unable to normalize PO line item without an id");let t=eH(e.line_value??e.value??e.total_value??0),a=eH(e.invoiced_value_usd??e.invoiced_value??e.invoice_value_usd??e.invoice_value??e.actual_value??0),r=eJ(e,"invoiced_value_usd")||eJ(e,"invoiced_value")||eJ(e,"invoice_value_usd")||eJ(e,"invoice_value"),s=eJ(e,"supplier_promise_date")||eJ(e,"promise_date");return{id:e.id,lineValue:t,invoiceValue:a,invoiceDate:e.invoice_date??null,promiseDate:e.supplier_promise_date??e.promise_date??null,createdAt:e.created_at??e.updated_at??null,hasInvoiceField:r,hasPromiseField:s}}function eQ(e,t){let a=t.lineValue>0?t.lineValue:e;if(t.hasInvoiceField){let r=t.invoiceValue*(a>0?Math.min(e/a,1):1);return{actual:r,future:Math.max(e-r,0)}}let r=.6*e;return{actual:r,future:Math.max(e-r,0)}}function e0(e){return e.promiseDate??null}async function e1(e,t){let a=(0,i.e)(),r=a.from("cost_breakdown").select("id, budget_cost, cost_line, spend_type").eq("project_id",e);t?.costLine&&"all"!==t.costLine&&(r=r.eq("cost_line",t.costLine)),t?.spendType&&"all"!==t.spendType&&(r=r.eq("spend_type",t.spendType));let{data:s,error:n}=await r;if(n)throw console.error("Error fetching budget data:",n),n;let l=s?.reduce((e,t)=>e+(Number(t.budget_cost)||0),0)||0,c=eG(s?.map(e=>e.id)||[]),o=[];if(c){let{data:e,error:t}=await a.from("po_mappings").select(`
        id,
        mapped_amount,
        cost_breakdown_id,
        po_line_item_id
      `).filter("cost_breakdown_id","in",c);t?console.error("Error fetching PO mappings:",t):e&&(o=e)}let d=0,u=0,m=0,h=0,x=0;if(d=o.reduce((e,t)=>e+(Number(t.mapped_amount)||0),0),o.length>0){let e=eG(o.map(e=>e.po_line_item_id));if(e){let{data:t,error:r}=await a.from("po_line_items").select("*").filter("id","in",e);if(!r&&t){let e=new Map;t.forEach(t=>{try{let a=eX(t);e.set(a.id,a)}catch(e){console.warn("Skipping malformed PO line item record in metrics",e)}}),o.forEach(t=>{let a=Number(t.mapped_amount)||0,r=t.po_line_item_id?e.get(t.po_line_item_id):void 0;if(!r){let e=.6*a;u+=e,m+=Math.max(a-e,0);return}let{actual:s,future:n}=eQ(a,r);u+=s,m+=n}),h=new Set(t.map(e=>e.po_id)).size,x=t.length}}}let p=l-d,g=l>0?d/l*100:0,f=new Date(2024,0,1),b=d/Math.max(1,Math.floor((Date.now()-f.getTime())/2592e6));return{totalBudget:l,actualSpend:d,variance:p,variancePercent:l>0?p/l*100:0,utilization:g,invoicedAmount:u,openOrders:m,burnRate:b,poCount:h,lineItemCount:x}}async function e2(e,t){let a=(0,i.e)().from("cost_breakdown").select("budget_cost").eq("project_id",e);t?.costLine&&"all"!==t.costLine&&(a=a.eq("cost_line",t.costLine)),t?.spendType&&"all"!==t.spendType&&(a=a.eq("spend_type",t.spendType));let{data:r}=await a,s=r?.reduce((e,t)=>e+(Number(t.budget_cost)||0),0)||0,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=new Date().getMonth(),c=[],o=0;if(s>0){let e=s/12;for(let t=0;t<=l;t++){let a=e*(.6+.3*Math.random()),r=.9*e;o+=a,c.push({month:n[t],budget:Math.round((t+1)*e),actual:Math.round(o),forecast:Math.round((t+1)*r)})}}else for(let e=0;e<=l;e++)c.push({month:n[e],budget:(e+1)*5e4,actual:(e+1)*35e3,forecast:(e+1)*45e3});return console.log("getTimelineData - Returning",c.length,"months of data"),c}async function e4(e,t){let a=(0,i.e)(),r=a.from("cost_breakdown").select("spend_type, budget_cost, id").eq("project_id",e);t?.costLine&&"all"!==t.costLine&&(r=r.eq("cost_line",t.costLine));let{data:s,error:n}=await r;if(n)return console.error("Error fetching category data:",n),[];console.log("getCategoryBreakdown - Cost data fetched:",s?.length||0,"items");let l=eG(s?.map(e=>e.id)||[]),c=[];if(l){let{data:e}=await a.from("po_mappings").select("cost_breakdown_id, mapped_amount").filter("cost_breakdown_id","in",l);c=e||[]}console.log("getCategoryBreakdown - Mappings fetched:",c.length,"items");let o={};return s?.forEach(e=>{o[e.spend_type]||(o[e.spend_type]={name:e.spend_type,value:0,budget:0}),o[e.spend_type].budget+=Number(e.budget_cost)||0}),c.length>0?c.forEach(e=>{let t=s?.find(t=>t.id===e.cost_breakdown_id);t&&o[t.spend_type]&&(o[t.spend_type].value+=Number(e.mapped_amount)||0)}):Object.keys(o).forEach(e=>{o[e].value=.65*o[e].budget}),Object.values(o)}async function e6(e,t){let a=(0,i.e)(),r=a.from("cost_breakdown").select("*").eq("project_id",e).order("sub_business_line, cost_line, spend_type, spend_sub_category");t?.costLine&&"all"!==t.costLine&&(r=r.eq("cost_line",t.costLine)),t?.spendType&&"all"!==t.spendType&&(r=r.eq("spend_type",t.spendType));let{data:s,error:n}=await r;if(n)return console.error("Error fetching breakdown data:",n),[];console.log("Cost breakdown data fetched:",s?.length||0,"items");let l=eG(s?.map(e=>e.id)||[]),c=[];if(l){let{data:e}=await a.from("po_mappings").select("cost_breakdown_id, mapped_amount").filter("cost_breakdown_id","in",l);c=e||[]}console.log("getHierarchicalBreakdown - Mappings fetched:",c.length,"items");let o={};c.length>0?c.forEach(e=>{o[e.cost_breakdown_id]=(o[e.cost_breakdown_id]||0)+(Number(e.mapped_amount)||0)}):s?.forEach(e=>{o[e.id]=.65*(Number(e.budget_cost)||0)});let d={};s?.forEach(e=>{let{sub_business_line:t,cost_line:a,spend_type:r,spend_sub_category:s}=e,n=Number(e.budget_cost)||0,i=o[e.id]||0;d[t]||(d[t]={id:`bl_${t}`,level:"business_line",name:t,budget:0,actual:0,variance:0,utilization:0,children:{}}),d[t].children[a]||(d[t].children[a]={id:`cl_${t}_${a}`,level:"cost_line",name:a,budget:0,actual:0,variance:0,utilization:0,children:{}}),d[t].children[a].children[r]||(d[t].children[a].children[r]={id:`st_${t}_${a}_${r}`,level:"spend_type",name:r,budget:0,actual:0,variance:0,utilization:0,children:[]});let l={id:e.id,level:"sub_category",name:s,budget:n,actual:i,variance:n-i,utilization:n>0?i/n*100:0};d[t].children[a].children[r].children.push(l),d[t].children[a].children[r].budget+=n,d[t].children[a].children[r].actual+=i,d[t].children[a].budget+=n,d[t].children[a].actual+=i,d[t].budget+=n,d[t].actual+=i});let u=[];return Object.values(d).forEach(e=>{e.variance=e.budget-e.actual,e.utilization=e.budget>0?e.actual/e.budget*100:0;let t=[];Object.values(e.children).forEach(e=>{e.variance=e.budget-e.actual,e.utilization=e.budget>0?e.actual/e.budget*100:0;let a=[];Object.values(e.children).forEach(e=>{e.variance=e.budget-e.actual,e.utilization=e.budget>0?e.actual/e.budget*100:0,a.push({...e,children:e.children})}),t.push({...e,children:a})}),u.push({...e,children:t})}),u}async function e3(e,t){let a=(0,i.e)(),r=a.from("cost_breakdown").select("id, budget_cost").eq("project_id",e);t?.costLine&&(r=r.eq("cost_line",t.costLine)),t?.spendType&&(r=r.eq("spend_type",t.spendType));let{data:s,error:n}=await r;if(n)throw n;let l=s?.reduce((e,t)=>e+(Number(t.budget_cost)||0),0)||0,c=eG(s?.map(e=>e.id)||[]);if(!c)return{totalBudget:l,totalCommitted:0,actualPLImpact:0,futurePLImpact:0,plGap:0};let{data:o,error:d}=await a.from("po_mappings").select("mapped_amount, po_line_item_id").filter("cost_breakdown_id","in",c);if(d)throw d;let u=0,m=0,h=0,x=eG((o||[]).map(e=>e.po_line_item_id)),p=new Map;if(x){let{data:e,error:t}=await a.from("po_line_items").select("*").filter("id","in",x);if(t)throw t;e?.forEach(e=>{try{let t=eX(e);p.set(t.id,t)}catch(e){console.warn("Skipping malformed PO line item record",e)}})}return o&&o.forEach(e=>{let t=Number(e.mapped_amount)||0;u+=t;let a=e.po_line_item_id?p.get(e.po_line_item_id):void 0;if(!a){let e=.6*t;m+=e,h+=Math.max(t-e,0);return}let{actual:r,future:s}=eQ(t,a);m+=r,h+=s}),{totalBudget:l,totalCommitted:u,actualPLImpact:m,futurePLImpact:h,plGap:u-m}}async function e5(e,t,a){let r=(0,i.e)(),{data:s,error:n}=await r.from("cost_breakdown").select("id").eq("project_id",e);if(n)throw n;let l=eG(s?.map(e=>e.id)||[]);if(!l)return[];let{data:c,error:o}=await r.from("po_mappings").select("mapped_amount, po_line_item_id").filter("cost_breakdown_id","in",l);if(o)throw o;let d=eG((c||[]).map(e=>e.po_line_item_id));if(!d)return[];let{data:u,error:m}=await r.from("po_line_items").select("*").filter("id","in",d);if(m)throw m;let h=new Map,x=!1;u?.forEach(e=>{try{let t=eX(e);h.set(t.id,t),x=x||t.hasInvoiceField}catch(e){console.warn("Skipping malformed PO line item record",e)}});let p=new Map,g=e=>{if(!e)return null;let r=new Date(e);return Number.isNaN(r.getTime())||r<t||r>a?null:r},f=(e,t,a)=>{if(!e||a<=0)return;let r=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`,s=p.get(r)||{actual:0,projected:0};s[t]+=a,p.set(r,s)};(c||[]).forEach(e=>{let r=Number(e.mapped_amount)||0,s=e.po_line_item_id?h.get(e.po_line_item_id):void 0;if(!s){let e=x?0:.6*r,s=Math.max(r-e,0);f(new Date(t),"actual",e),s>0&&f(new Date(a),"projected",s);return}let{actual:n,future:i}=eQ(r,s),l=g(s.invoiceDate??s.createdAt??null),c=g(e0(s)),o=l??g(s.createdAt),d=c??o??new Date(a);f(o,"actual",n),i>0&&f(d,"projected",i)});let b=[],j=0;return Array.from(p.keys()).sort().forEach(e=>{let[t,a]=e.split("-"),r=p.get(e);j+=r.actual+r.projected,b.push({month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(a)-1]||"",year:parseInt(t),actualPL:r.actual,projectedPL:r.projected,cumulative:j})}),b}async function e7(e){let t=(0,i.e)(),{data:a,error:r}=await t.from("cost_breakdown").select("id").eq("project_id",e);if(r)throw r;let s=eG(a?.map(e=>e.id)||[]);if(!s)return new Map;let{data:n,error:l}=await t.from("po_mappings").select("mapped_amount, po_line_item_id").filter("cost_breakdown_id","in",s);if(l)throw l;let c=eG((n||[]).map(e=>e.po_line_item_id));if(!c)return new Map;let{data:o,error:d}=await t.from("po_line_items").select("*").filter("id","in",c);if(d)throw d;let u=new Map;o?.forEach(e=>{try{let t=eX(e);u.set(t.id,t)}catch(e){console.warn("Skipping malformed PO line item record",e)}});let m=new Map;return n&&n.forEach(e=>{let t=Number(e.mapped_amount)||0,a=e.po_line_item_id?u.get(e.po_line_item_id):void 0;if(!a)return;let{future:r}=eQ(t,a);if(r<=0)return;let s=e0(a);if(!s)return;let n=new Date(s).toISOString().split("T")[0],i=m.get(n)||0;m.set(n,i+r)}),m}var e8=a(45034),e9=a(76240);async function te(e,t){try{let a=e.innerHTML,r=window.open("","_blank");r&&(r.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>${t} Dashboard</title>
            <style>
              body { font-family: sans-serif; padding: 20px; }
              @media print {
                body { margin: 0; }
              }
            </style>
          </head>
          <body>
            <h1>${t} Dashboard Report</h1>
            <p>Generated: ${new Date().toLocaleString()}</p>
            <hr>
            ${a}
          </body>
        </html>
      `),r.document.close(),r.print())}catch(e){throw console.error("Error exporting PDF:",e),e}}async function tt(e,t){try{let a=function(e){let t=[];return t.push("METRICS"),t.push("Metric,Value"),e.metrics&&(t.push(`Total Budget,${e.metrics.totalBudget}`),t.push(`Actual Spend,${e.metrics.actualSpend}`),t.push(`Variance,${e.metrics.variance}`),t.push(`Utilization %,${e.metrics.utilization}`),t.push(`Invoiced Amount,${e.metrics.invoicedAmount}`),t.push(`Open Orders,${e.metrics.openOrders}`),t.push(`PO Count,${e.metrics.poCount}`)),t.push(""),t.push("TIMELINE DATA"),t.push("Month,Budget,Actual,Forecast"),e.timeline&&e.timeline.forEach(e=>{t.push(`${e.month},${e.budget},${e.actual},${e.forecast}`)}),t.push(""),t.push("CATEGORY BREAKDOWN"),t.push("Category,Budget,Actual Spend"),e.categories&&e.categories.forEach(e=>{t.push(`${e.name},${e.budget},${e.value}`)}),t.join("\n")}(e),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),n=URL.createObjectURL(r);s.setAttribute("href",n),s.setAttribute("download",`${t}_dashboard_${new Date().toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){throw console.error("Error exporting Excel:",e),e}}function ta({params:e}){let t=e.id,a=(0,i.e)(),{toast:n}=(0,e8.pm)(),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),[p,b]=(0,s.useState)([]),[j,v]=(0,s.useState)([]),[y,N]=(0,s.useState)([]),[w,O]=(0,s.useState)([]),[k,A]=(0,s.useState)(!1),[E,P]=(0,s.useState)(null),[C,S]=(0,s.useState)([]),[D,M]=(0,s.useState)([]),[L,I]=(0,s.useState)([]),[$,z]=(0,s.useState)([]),[R,B]=(0,s.useState)({dateRange:{from:new Date(new Date().setMonth(new Date().getMonth()-6)),to:new Date},showForecasts:!0,comparisonMode:"none"}),q=async()=>{try{m(!0);let{data:e,error:r}=await a.from("projects").select("*").eq("id",t).single();if(r)throw r;x(e);let s=await e1(t,R);d(s);let n=await e3(t,{costLine:R.costLine,spendType:R.spendType});P(n),console.log("P&L Metrics:",n);let[i,l,c,o,u]=await Promise.all([e2(t,R),e4(t,R),e6(t,R),e5(t,R.dateRange.from,R.dateRange.to),e7(t)]);console.log("P&L Timeline:",o),console.log("Open POs by Promise Date:",u),console.log("Timeline data:",i),console.log("Category data:",l),console.log("Breakdown data:",c),b(i),v(l),N(c),S(o);let h=Array.from(u.entries()).map(([e,t])=>({date:e,amount:t,supplier:"Multiple",lineItems:1}));M(h);let p=l.map(e=>({name:e.name,budget:e.budget,committed:e.value,plImpact:.6*e.value,gapToPL:.4*e.value}));I(p);let g=[];console.log("Processing breakdown for subcategories, breakdown length:",c.length),c.forEach(e=>{console.log("Business Line:",e.name,"has children:",!!e.children),e.children&&e.children.forEach(e=>{console.log("  Cost Line:",e.name,"has children:",!!e.children),e.children&&e.children.forEach(e=>{console.log("    Spend Type:",e.name,"has children:",!!e.children),e.children&&e.children.forEach(t=>{console.log("      Subcategory:",t.name,"actual:",t.actual),g.push({category:e.name,subcategory:t.name,value:t.actual,budget:t.budget,percentage:t.utilization})})})})}),console.log("Total subcategories found:",g.length),z(g);let f=K(i);O(f)}catch(e){console.error("Error loading dashboard data:",e),n({variant:"destructive",title:"Failed to Load Dashboard",description:"Unable to load dashboard data. Please refresh the page."})}finally{m(!1)}},K=e=>e.map((t,a)=>{let r=a>0?e[a-1].actual:0,s=t.actual-r;return{month:t.month,amount:s,cumulative:t.actual}}),U=async()=>{A(!0),await q(),A(!1)},Y=async()=>{let e=document.getElementById("dashboard-content");e&&h&&(await te(e,h.name),n({title:"Export Successful",description:"Dashboard exported to PDF"}))},V=async()=>{h&&o&&(await tt({metrics:o,breakdown:y,timeline:p,categories:j},h.name),n({title:"Export Successful",description:"Dashboard exported to Excel"}))};return u?r.jsx(eW,{}):h?(0,r.jsxs)("div",{className:"container mx-auto p-6 max-w-[1600px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold",children:[h.name," Dashboard"]}),r.jsx("p",{className:"text-muted-foreground",children:h.sub_business_line})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(f.z,{variant:"outline",size:"sm",onClick:U,disabled:k,children:[r.jsx(T.Z,{className:`h-4 w-4 mr-1 ${k?"animate-spin":""}`}),"Refresh"]}),r.jsx(f.z,{variant:"outline",size:"sm",onClick:Y,children:"Export PDF"}),r.jsx(f.z,{variant:"outline",size:"sm",onClick:V,children:"Export Excel"}),r.jsx(f.z,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:"Back to Projects"})]})]}),(0,r.jsxs)("div",{id:"dashboard-content",className:"space-y-6 mt-6",children:[!1,o&&r.jsx(g,{budget:o.totalBudget,committed:o.actualSpend,plImpact:o.invoicedAmount,thisMonthPL:o.invoicedAmount/12,thisMonthChange:23,nextPLHits:D.slice(0,3).map(e=>({date:e.date,amount:e.amount,supplier:e.supplier||"Various"})),plGap:o.actualSpend-o.invoicedAmount,monthlyBreakdown:C.map(e=>({month:e.month,actual:e.actualPL||0,projected:e.projectedPL||0})),loading:u,onViewGapAnalysis:()=>{console.log("View gap analysis")}}),L.length>0&&r.jsx(_,{categories:L,onDrillDown:e=>{console.log("Drill down into:",e)},onCustomize:()=>{console.log("Customize matrix view")},loading:u}),C.length>0&&r.jsx(F,{data:C.map(e=>({month:e.month,actualPL:e.actualPL,projectedPL:e.projectedPL,budget:o?.totalBudget?o.totalBudget/12:0,cumulative:e.cumulative})),events:D.slice(0,5).map(e=>({date:e.date,amount:e.amount,description:`${e.supplier} delivery`,type:new Date(e.date)<new Date?"overdue":"expected"})),currentMonth:new Date().getMonth(),view:"monthly",onViewChange:e=>console.log("Change view to:",e),onRefresh:U,loading:u}),p.length>0&&(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"Budget vs Actual Timeline"})}),r.jsx(l.aY,{children:r.jsx(e$,{data:p})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"Spend by Category"})}),r.jsx(l.aY,{children:j.length>0?r.jsx(eq,{data:j}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No category data available"})})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"Spend by Subcategory"})}),r.jsx(l.aY,{children:$.length>0?r.jsx(eE,{data:$,loading:u,onDrillDown:(e,t)=>{console.log("Drill down:",e,t)}}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No subcategory data available"})})]})]}),D.length>0&&r.jsx(Z,{promises:D,currentDate:new Date,onDateClick:(e,t)=>{console.log("Date clicked:",e,t)},loading:u}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:"Detailed Cost Breakdown"})}),r.jsx(l.aY,{children:r.jsx(eY,{data:y})})]})]})]}):r.jsx("div",{className:"container mx-auto p-6",children:(0,r.jsxs)(e9.bZ,{variant:"destructive",children:[r.jsx(c.Z,{className:"h-4 w-4"}),r.jsx(e9.Cd,{children:"Project Not Found"}),r.jsx(e9.X,{children:"The requested project could not be found."})]})})}},76240:(e,t,a)=>{"use strict";a.d(t,{Cd:()=>c,X:()=>o,bZ:()=>l});var r=a(30817);a(19196);var s=a(84766),n=a(61601);let i=(0,s.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...a}){return r.jsx("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:t}),e),...a})}function c({className:e,...t}){return r.jsx("div",{"data-slot":"alert-title",className:(0,n.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function o({className:e,...t}){return r.jsx("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}},25478:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(30817);a(19196);var s=a(98652),n=a(61601);function i({className:e,value:t,...a}){return r.jsx(s.fC,{"data-slot":"progress",className:(0,n.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:r.jsx(s.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}},35135:(e,t,a)=>{"use strict";a.d(t,{O:()=>n});var r=a(30817),s=a(61601);function n({className:e,...t}){return r.jsx("div",{"data-slot":"skeleton",className:(0,s.cn)("bg-accent animate-pulse rounded-md",e),...t})}},42543:e=>{e.exports=function(e,t){for(var a=-1,r=null==e?0:e.length;++a<r&&!1!==t(e[a],a,e););return e}},77349:(e,t,a)=>{var r=a(62453),s=a(48003),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,a){var i=e[t];n.call(e,t)&&s(i,a)&&(void 0!==a||t in e)||r(e,t,a)}},33704:(e,t,a)=>{var r=a(13132),s=a(38722);e.exports=function(e,t){return e&&r(t,s(t),e)}},70423:(e,t,a)=>{var r=a(13132),s=a(11018);e.exports=function(e,t){return e&&r(t,s(t),e)}},34158:(e,t,a)=>{var r=a(89162),s=a(42543),n=a(77349),i=a(33704),l=a(70423),c=a(5014),o=a(82971),d=a(59941),u=a(47822),m=a(97114),h=a(65876),x=a(40310),p=a(97507),g=a(20289),f=a(30389),b=a(87650),j=a(99760),v=a(32518),y=a(70387),N=a(7042),w=a(38722),_=a(11018),O="[object Arguments]",k="[object Function]",A="[object Object]",E={};E[O]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[A]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[k]=E["[object WeakMap]"]=!1,e.exports=function e(t,a,P,C,S,D){var M,L=1&a,T=2&a,F=4&a;if(P&&(M=S?P(t,C,S,D):P(t)),void 0!==M)return M;if(!y(t))return t;var I=b(t);if(I){if(M=p(t),!L)return o(t,M)}else{var $=x(t),Z=$==k||"[object GeneratorFunction]"==$;if(j(t))return c(t,L);if($==A||$==O||Z&&!S){if(M=T||Z?{}:f(t),!L)return T?u(t,l(M,t)):d(t,i(M,t))}else{if(!E[$])return S?t:{};M=g(t,$,L)}}D||(D=new r);var z=D.get(t);if(z)return z;D.set(t,M),N(t)?t.forEach(function(r){M.add(e(r,a,P,r,t,D))}):v(t)&&t.forEach(function(r,s){M.set(s,e(r,a,P,s,t,D))});var R=F?T?h:m:T?_:w,B=I?void 0:R(t);return s(B||t,function(r,s){B&&(r=t[s=r]),n(M,s,e(r,a,P,s,t,D))}),M}},75884:(e,t,a)=>{var r=a(70387),s=Object.create,n=function(){function e(){}return function(t){if(!r(t))return{};if(s)return s(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();e.exports=n},55268:(e,t,a)=>{var r=a(40310),s=a(24933);e.exports=function(e){return s(e)&&"[object Map]"==r(e)}},85709:(e,t,a)=>{var r=a(40310),s=a(24933);e.exports=function(e){return s(e)&&"[object Set]"==r(e)}},27906:(e,t,a)=>{var r=a(70387),s=a(3821),n=a(77233),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return n(e);var t=s(e),a=[];for(var l in e)"constructor"==l&&(t||!i.call(e,l))||a.push(l);return a}},77148:(e,t,a)=>{var r=a(69658),s=a(47390),n=a(56387),i=a(73018);e.exports=function(e,t){return t=r(t,e),null==(e=n(e,t))||delete e[i(s(t))]}},42250:(e,t,a)=>{var r=a(94282);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},5014:(e,t,a)=>{e=a.nmd(e);var r=a(45872),s=t&&!t.nodeType&&t,n=s&&e&&!e.nodeType&&e,i=n&&n.exports===s?r.Buffer:void 0,l=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var a=e.length,r=l?l(a):new e.constructor(a);return e.copy(r),r}},21920:(e,t,a)=>{var r=a(42250);e.exports=function(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}},30431:e=>{var t=/\w*$/;e.exports=function(e){var a=new e.constructor(e.source,t.exec(e));return a.lastIndex=e.lastIndex,a}},70669:(e,t,a)=>{var r=a(75845),s=r?r.prototype:void 0,n=s?s.valueOf:void 0;e.exports=function(e){return n?Object(n.call(e)):{}}},97884:(e,t,a)=>{var r=a(42250);e.exports=function(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}},82971:e=>{e.exports=function(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}},13132:(e,t,a)=>{var r=a(77349),s=a(62453);e.exports=function(e,t,a,n){var i=!a;a||(a={});for(var l=-1,c=t.length;++l<c;){var o=t[l],d=n?n(a[o],e[o],o,a,e):void 0;void 0===d&&(d=e[o]),i?s(a,o,d):r(a,o,d)}return a}},59941:(e,t,a)=>{var r=a(13132),s=a(54921);e.exports=function(e,t){return r(e,s(e),t)}},47822:(e,t,a)=>{var r=a(13132),s=a(58234);e.exports=function(e,t){return r(e,s(e),t)}},26419:(e,t,a)=>{var r=a(35125);e.exports=function(e){return r(e)?void 0:e}},309:(e,t,a)=>{var r=a(43760),s=a(22243),n=a(51857);e.exports=function(e){return n(s(e,void 0,r),e+"")}},65876:(e,t,a)=>{var r=a(59548),s=a(58234),n=a(11018);e.exports=function(e){return r(e,n,s)}},58234:(e,t,a)=>{var r=a(53481),s=a(7972),n=a(54921),i=a(67914),l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,n(e)),e=s(e);return t}:i;e.exports=l},97507:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var a=e.length,r=new e.constructor(a);return a&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},20289:(e,t,a)=>{var r=a(42250),s=a(21920),n=a(30431),i=a(70669),l=a(97884);e.exports=function(e,t,a){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return s(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,a);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return n(e);case"[object Symbol]":return i(e)}}},30389:(e,t,a)=>{var r=a(75884),s=a(7972),n=a(3821);e.exports=function(e){return"function"!=typeof e.constructor||n(e)?{}:r(s(e))}},77233:e=>{e.exports=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}},56387:(e,t,a)=>{var r=a(3068),s=a(19105);e.exports=function(e,t){return t.length<2?e:r(e,s(t,0,-1))}},43760:(e,t,a)=>{var r=a(64649);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},32518:(e,t,a)=>{var r=a(55268),s=a(2198),n=a(40890),i=n&&n.isMap,l=i?s(i):r;e.exports=l},7042:(e,t,a)=>{var r=a(85709),s=a(2198),n=a(40890),i=n&&n.isSet,l=i?s(i):r;e.exports=l},11018:(e,t,a)=>{var r=a(14950),s=a(27906),n=a(9512);e.exports=function(e){return n(e)?r(e,!0):s(e)}},26456:(e,t,a)=>{var r=a(93223),s=a(34158),n=a(77148),i=a(69658),l=a(13132),c=a(26419),o=a(309),d=a(65876),u=o(function(e,t){var a={};if(null==e)return a;var o=!1;t=r(t,function(t){return t=i(t,e),o||(o=t.length>1),t}),l(e,d(e),a),o&&(a=s(a,7,c));for(var u=t.length;u--;)n(a,t[u]);return a});e.exports=u},18426:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(50367).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},36323:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(50367).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},58334:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(50367).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},31058:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(73883).createProxy)(String.raw`/home/iwahbi/dev/cost-management-v0/apps/web/app/projects/[id]/dashboard/page.tsx#default`)},25616:(e,t,a)=>{"use strict";function r(){return null}a.r(t),a.d(t,{default:()=>r})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[379,611,579,426,478,177],()=>a(4656));module.exports=r})();