(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{12840:function(e,s,l){Promise.resolve().then(l.bind(l,21177))},21177:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return c}});var t=l(2562),n=l(53121),a=l(98668),r=l(6924);let d=(0,a.K5)({links:[(0,a.N8)({url:r.env.NEXT_PUBLIC_TRPC_URL||(console.warn("NEXT_PUBLIC_TRPC_URL not set, tRPC calls will fail"),"http://localhost:54321/functions/v1/trpc"),headers:()=>({})})]});function c(){let[e,s]=(0,n.useState)("World"),[l,a]=(0,n.useState)(null),[r,c]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),x=async()=>{o(!0),m(null);try{let s=await d.test.hello.query({name:e});a(s)}catch(e){m(e instanceof Error?e.message:"Unknown error")}finally{o(!1)}},u=async()=>{o(!0),m(null);try{let e=await d.test.healthCheck.query();c(e)}catch(e){m(e instanceof Error?e.message:"Unknown error")}finally{o(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto p-8 max-w-4xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"tRPC API Test"}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,t.jsx)("strong",{children:"⚠️ Note:"})," This page requires the tRPC Edge Function to be deployed.",(0,t.jsx)("br",{}),"See ",(0,t.jsx)("code",{className:"bg-yellow-100 px-1",children:"supabase/functions/README.md"})," for deployment instructions."]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test: hello"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Name:"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter name"})]}),(0,t.jsx)("button",{onClick:x,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:i?"Loading...":"Call trpc.test.hello"}),l&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-green-50 rounded-md",children:(0,t.jsx)("p",{className:"font-mono text-sm",children:JSON.stringify(l,null,2)})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test: healthCheck"}),(0,t.jsx)("button",{onClick:u,disabled:i,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400",children:i?"Loading...":"Call trpc.test.healthCheck"}),r&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-green-50 rounded-md",children:(0,t.jsx)("p",{className:"font-mono text-sm whitespace-pre",children:JSON.stringify(r,null,2)})})]}),h&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-red-800 mb-2",children:"Error:"}),(0,t.jsx)("p",{className:"text-red-700 font-mono text-sm",children:h}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-2",children:"Make sure NEXT_PUBLIC_TRPC_URL is set in .env.local and the Edge Function is deployed."})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Setup Instructions:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[(0,t.jsxs)("li",{children:["Deploy tRPC Edge Function: ",(0,t.jsx)("code",{className:"bg-gray-200 px-1",children:"supabase functions deploy trpc"})]}),(0,t.jsxs)("li",{children:["Add ",(0,t.jsx)("code",{className:"bg-gray-200 px-1",children:"NEXT_PUBLIC_TRPC_URL"})," to ",(0,t.jsx)("code",{className:"bg-gray-200 px-1",children:".env.local"})]}),(0,t.jsx)("li",{children:"Restart Next.js dev server"}),(0,t.jsx)("li",{children:"Refresh this page and test the endpoints"})]})]})]})}}},function(e){e.O(0,[497,208,945,744],function(){return e(e.s=12840)}),_N_E=e.O()}]);